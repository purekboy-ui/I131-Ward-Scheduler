# (DEMO)碘131隔離病房排程管理系統 (I-131 Ward Scheduling System)

## 1. 簡介 (Introduction)
本系統為專為核子醫學科設計之「碘131隔離病房排程管理系統」，旨在解決傳統紙本或 Excel 排程的效率低落與錯誤風險。透過視覺化的月曆介面、自動化的規則檢核與權限控管，提升排床效率並確保輻防安全。

---

## 2. 系統目標 (Objectives)
- **視覺化排程**：提供直觀的月曆介面，即時掌握病房 (5B/6B) 與小劑量門診佔用狀況。
- **自動化檢核**：系統自動檢核開床日、國定假日與病床資源衝突，並內建 21 天防呆鎖定機制。
- **後續追蹤**：獨立的訂藥管理系統，確保排床後的劑量與劑型配藥準確無誤。
- **權限分級**：嚴格區分管理員、配藥藥師與一般使用者，確保資料安全性與醫療責任歸屬。
- **完整稽核**：記錄所有新增、修改、刪除操作，特別防護歷史紀錄，供日後追溯。

---

## 3. 使用者角色 (User Roles)

| 角色 | 權限描述 | 適用對象 |
| :--- | :--- | :--- |
| **系統管理員 (Admin)** | 最高權限。可管理所有預約（包含無視 21 天鎖定與歷史限制）、管理訂藥狀態、設定鎖定天數與查看所有報表/日誌。 | 核子醫學科管理排程人員、伺服器管理員 |
| **藥師 (Pharmacist)** | 擁有「訂藥管理」的最高權限，可確認訂藥狀態並匯出報表。但**不可**修改病患預約日期、床位與醫令劑量 (唯讀防護)。 | 核子醫學科專責訂藥人員 |
| **一般使用者 (User)** | 僅可新增/查看預約、編輯與刪除 **「自己建立」且「大於 21 天」** 的預約。無權查看訂藥與操作日誌。 | 臨床醫師及個管師 |

---

## 4. 核心功能 (Core Features)

### 4.1 視覺化排程月曆
- 顯示每日 5B/6B 床位狀態與小劑量預約數量徽章。
- 右鍵呼叫快捷選單，左鍵點擊空床直接新增。

### 4.2 預約與防呆保護機制
- **住院預約**：限制同一床位同一天不可重複預約。
- **小劑量預約**：獨立建立 Modal，不佔用住院床位，且強制限制給藥日。
- **21 天鎖定機制**：距離入住不足 21 天的訂單，一般人員無法新增、修改、刪除。
- **歷史預約防護**：無法更動已發生的過去紀錄，若有特例由 Admin 強制作業並留下稽核標記。

### 4.3 訂藥管理模組
- 結構化劑量、劑型 (`錠劑/水劑`) 與 `Thyrogen` 開放選項。
- 專屬藥師列表，可一鍵切換「已訂藥 / 未訂藥」狀態。
- 支援一鍵匯出 Excel/CSV 表單或列印為 PDF 配藥清單。

### 4.4 報表與稽核紀錄 (Audit Logs)
- **月度統計表**：依月份匯出 5B/6B 入住與佔床率資料。
- **全域篩選器**：各列表皆支援精確的「起始~結束」日期區間檢索。
- **操作紀錄**：精準記錄所有 Create, Update, Delete 行為細節供備查。

---

## 5. 技術架構與環境

- **前端架構**：純 HTML5 / CSS3 / Vanilla JavaScript。
- **不依賴框架**：無須編譯 (Build step)，輕量化部署。
- **設計風格**：柔和、溫暖色調，導入 Glassmorphism (毛玻璃) 與現代科技感 SVG 圖示。

---

## 6. 未來擴充規劃 (Roadmap)
- [ ] 介接後端 API 與資料庫 (MySQL/PostgreSQL)。
- [ ] 整合 HIS 系統取得病患基本資料。
- [ ] Line Notify 自動通知功能。
- [ ] 輻射劑量自動計算與超標警示。

---

## 7. DEMO 網址
🔗 https://purekboy-ui.github.io/I131-Ward-Scheduler/

---

## 8. 本地部署 (Deployment)

若要於本地端執行：

```bash
# 1. 下載專案
git clone <repository-url>

# 2. 進入資料夾
cd I131-Ward-Scheduler

# 3. 啟動測試伺服器 (需安裝 Node.js)
npx serve .
# 或是使用 http-server
npx http-server . -p 8081
```

---
*詳細規格差異與權限動機，請參見 `user_feedback.md`*
